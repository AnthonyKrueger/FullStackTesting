(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n.n(c),s=n(31),a=n.n(s),i=(n(37),n(5)),o=n.n(i),l=n(10),u=n(11),j=(n(39),n(13)),b=n(2),x=n(15),h=n(19),d=n(16),p=n.n(d),f=n(0);function O(e){var t=e.loginFunction,n=Object(c.useState)({username:"",password:""}),r=Object(u.a)(n,2),s=r[0],a=r[1];function i(e,t){a(Object(h.a)(Object(h.a)({},s),{},Object(x.a)({},e,t)))}function j(){return(j=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,p.a.post("/api/user/login",{username:s.username,password:s.password}).catch((function(e){console.log(e)}));case 3:e.sent?(console.log("Login Successful"),t(!0)):console.log("Login Failed");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:function(e){return function(e){return j.apply(this,arguments)}(e)},children:[Object(f.jsx)("input",{type:"text",placeholder:"Username",value:s.username,onChange:function(e){return i("username",e.target.value)}}),Object(f.jsx)("input",{type:"text",placeholder:"Password",value:s.password,onChange:function(e){return i("password",e.target.value)}}),Object(f.jsx)("button",{type:"submit",children:"Login"})]})})}function g(e){var t=e.loginFunction,n=Object(c.useState)(null),r=Object(u.a)(n,2),s=r[0],a=r[1];function i(){return(i=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/session");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),a(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:s||"No User Loaded"}),Object(f.jsx)("button",{onClick:function(){return i.apply(this,arguments)},children:"Fetch Data"}),Object(f.jsx)(O,{loginFunction:t})]})}function m(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/user/me");case 2:(t=e.sent)?r(t.data):console.log("error");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n?Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"UserData: "}),Object(f.jsx)("h2",{children:n.username}),Object(f.jsx)("h3",{children:n._id})]}):Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"No Data"})})}function v(e){var t=e.logoutFunction;return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!1),e.next=3,fetch("/api/user/logout");case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(f.jsx)(b.a,{to:"/"})}var w=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.useEffect((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/loggedIn");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n.loggedIn);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(f.jsx)(j.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("nav",{className:"flex items-center justify-between flex-wrap bg-blue-500 p-6",children:[Object(f.jsx)("div",{className:"flex items-center flex-shrink-0 text-white mr-6",children:Object(f.jsx)("span",{className:"font-semibold text-xl tracking-tight",children:"FullStackApp"})}),Object(f.jsxs)("div",{className:"w-full block lg:flex lg:items-center lg:w-auto lg:space-x-10",children:[Object(f.jsx)("div",{className:"text-md lg:flex-grow",children:Object(f.jsx)(j.b,{to:"/",className:"block mt-4 lg:inline-block lg:mt-0 text-red-200 hover:text-white mr-4",children:"Home"})}),Object(f.jsx)("div",{className:"text-md lg:flex-grow",children:Object(f.jsx)(j.b,{to:"/user",className:"block mt-4 lg:inline-block lg:mt-0 text-red-200 hover:text-white mr-4",children:"User"})}),Object(f.jsx)("div",{className:"text-md lg:flex-grow",children:Object(f.jsx)(j.b,{to:n?"/logout":"/login",className:"block mt-4 lg:inline-block lg:mt-0 text-red-200 hover:text-white mr-4",children:n?"Logout":"Login"})})]})]}),Object(f.jsxs)(b.d,{children:[Object(f.jsx)(b.b,{exact:!0,path:"/",children:Object(f.jsx)(g,{loginFunction:c})}),Object(f.jsx)(b.b,{path:"/user",children:n?Object(f.jsx)(m,{}):Object(f.jsx)(b.a,{to:"/"})}),Object(f.jsx)(b.b,{path:"/logout",children:n?Object(f.jsx)(v,{logoutFunction:c}):Object(f.jsx)(b.a,{to:"/"})})]})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),k()}},[[66,1,2]]]);
//# sourceMappingURL=main.a935e722.chunk.js.map